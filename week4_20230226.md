# Kotlin in Action ìŠ¤í„°ë”” 4ì£¼ì°¨ ğŸ”¥
### 2023-02-26(ì¼)

---



## 7. ì—°ì‚°ì ì˜¤ë²„ë¡œë”©ê³¼ ê¸°íƒ€ ê´€ë¡€

ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”© í•˜ëŠ” í•¨ìˆ˜ ì•ì—ëŠ” ê¼­ `operator` í‚¤ì›Œë“œë¥¼ ë¶™ì—¬ì£¼ì–´ì•¼ í•œë‹¤. í‚¤ì›Œë“œë¥¼ ë¶™ì„ìœ¼ë¡œ ì¨ ì–´ë–¤ í•¨ìˆ˜ê°€ ê´€ë¡€ë¥¼ í•¨ìˆ˜ì„ì„ ëª…í™•íˆ í•  ìˆ˜ ìˆë‹¤.

ì´ í‚¤ì›Œë“œë¥¼ í™œìš©í•˜ì—¬ ì‚°ìˆ  ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”©í•˜ê±°ë‚˜ ë¹„êµ ì—°ì‚°ìë¥¼ ì˜¤ë²„ë¡œë”© ê·¸ë¦¬ê³  ì»¬ë ‰ì…˜ì˜ ë²”ìœ„ì— ëŒ€í•´ ì—°ì‚°ì„ ì§€ì›í•  ìˆ˜ ìˆë‹¤.

### êµ¬ì¡° ë¶„í•´ ì„ ì–¸
êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì„ ì‚¬ìš©í•˜ë©´ ë³µí•©ì ì¸ ê°’ì„ ë¶„í•´í•´ì„œ ì—¬ëŸ¬ ë‹¤ë¥¸ ë³€ìˆ˜ë¥¼ í•œêº¼ë²ˆì— ì´ˆê¸°í™” í•  ìˆ˜ ìˆë‹¤.
```kotlin
>>> val p = Point(10, 20)
>>> val (x, y) = p
>>> println(x)
10
```

ë‚´ë¶€ì—ì„œ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì€ ê° ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™” í•˜ê¸° ìœ„í•´ `componentN`ì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.

Nì€ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì´ ìˆëŠ” ë³€ìˆ˜ ìœ„ì¹˜ì— ë”°ë¼ ë¶™ëŠ” ë²ˆí˜¸ê°€ ëœë‹¤.

```kotlin
val (x, y) = p  -> val x = p.component1(), val y = p.component2()
```

ì˜ˆì‹œë¡œ íŒŒì¼ ì´ë¦„ì„ ì´ë¦„ê³¼ í™•ì¥ìë¡œ ë‚˜ëˆ„ëŠ” í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ë³´ì.

```kotlin
data class NameComponents(val name: String, val extension: String)

fun splitFilename(fullName: String): NameComponents {
    val result = fullName.split('.', limit = 2)
    return NameComponents(result[0], result[1])
}
```
ìœ„ ì˜ˆì œë¥¼ ì•ì„œë§í•œ `componentN` í•¨ìˆ˜ë¥¼ ì ìš©í•˜ì—¬ ê°œì„ í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë¦¬íŒ©í† ë§í•  ìˆ˜ ìˆë‹¤.

```kotlin
data class NameComponents(val name: String, val extension: String)

fun splitFilename(fullName: String): NameComponents {
    
    val (name, extension) = fullName.split('.', limit = 2)
    return NameComponents(name, extension)
}
```

ë§µ ìë£Œí˜•ì„ ì´í„°ë ˆì´ì…˜í•  ë•Œì—ë„ êµ¬ì¡° ë¶„í•´ ì„ ì–¸ì€ ìœ ìš©í•˜ë‹¤.
```kotlin
fun printEntries(map: Map<String, String>){
    for((key, value) in map){
        println("$key -> $value")
    }
}
```

---

### í”„ë¡œí¼í‹° ì ‘ê·¼ì ë¡œì§ ì¬í™œìš©: ìœ„ì„ í”„ë¡œí¼í‹°

í”„ë¡œí¼í‹° ìœ„ì„ì„ ì‚¬ìš©í•´ ìì‹ ì˜ ê°’ì„ í•„ë“œê°€ ì•„ë‹ˆë¼ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”ì´ë‚˜ ë¸Œë¼ì´ì € ì„¸ì…˜, ë§µ ë“±ì— ì €ì¥í•  ìˆ˜ ìˆë‹¤.

ìœ„ì„ì„ í†µí•´ ê°ì²´ê°€ ì§ì ‘ ì‘ì—…ì„ ìˆ˜í–‰í•˜ì§€ ì•Šê³  ë‹¤ë¥¸ ë„ìš°ë¯¸ ê°ì²´ê°€ ê·¸ ì‘ì—…ì„ ì²˜ë¦¬í•˜ê²Œ ë§¡ê¸°ëŠ” ë””ìì¸ íŒ¨í„´ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

ì´ë•Œ ë„ìš°ë¯¸ ê°ì²´ë¥¼ ìœ„ì„ ê°ì²´(delegate)ë¼ê³  ë¶€ë¥¸ë‹¤.

ìœ„ì„ í”„ë¡œí¼í‹°ì˜ ì¼ë°˜ì ì¸ ë¬¸ë²•

```kotlin

import kotlin.properties.Delegates

class Foo {
    var p: Type by Delegates()
}
```
í”„ë¡œí¼í‹° ìœ„ì„ ê°ì²´ê°€ ë”°ë¼ì•¼ í•˜ëŠ” ê´€ë¡€ë¥¼ ë”°ë¥´ëŠ” ëª¨ë“  ê°ì²´ë¥¼ ìœ„ì„ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

```kotlin

import kotlin.properties.Delegates

class Foo {
    private val delegate = Delegates() // ì»´íŒŒì¼ëŸ¬ê°€ ìƒì„±í•œ ë„ìš°ë¯¸ í”„ë¡œí¼í‹°
    var p = Type
        set(value: Type) = delegate.setValue(..., value)
        get() = delegate.getvalue(...)
}
```
í”„ë¡œí¼í‹° ìœ„ì„ ê´€ê³„ë¥¼ ë”°ë¥´ëŠ” Delegateí´ë˜ìŠ¤ëŠ” get, set ë©”ì„œë“œë¥¼ ì œê³µí•´ì•¼ í•œë‹¤. Delegate í´ë˜ìŠ¤ë¥¼ ë‹¨ìˆœí™”í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.

```kotlin
class Delegate {
    operator fun getValue(){}
    operator fun setValue(){}
}

class Foo {
    var p: Type by Delegate()
}

>>> val foo = Foo()
>>> val oldValue = foo.p
>>> foo.p = newVaule
```

--- 

ì§€ì—° ì´ˆê¸°í™”ëŠ” ê°ì²´ì˜ ì¼ë¶€ë¶„ì„ ì´ˆê¸°í™”í•˜ì§€ ì•Šê³  ë‚¨ê²¨ë’€ë‹¤ê°€ ì‹¤ì œë¡œ ê·¸ ë¶€ë¶„ì˜ ê°’ì´ í•„ìš”í•  ê²½ìš° ì´ˆê¸°í™”í•  ë•Œ í”íˆ ì“°ì¸ë‹¤.

